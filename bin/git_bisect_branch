#!/usr/bin/env bash

# TODO: test

if echodo "$@"; then
    echo ${COLOR_GREEN}HEAD passes${COLOR_RESET};
else
    echodo git bisect reset;
    echodo git bisect start;
    echodo git bisect bad;
    echodo git checkout "$(git_branch_fork_point)";
    if echodo "$@"; then
        echodo git bisect good;
        git bisect run bash -cl "echodo $*";
        echodo git bisect reset;
    else
        echodo git bisect reset;
        echoerr 'This whole branch fails';
    fi;
fi
